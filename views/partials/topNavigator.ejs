<div class="container" style="list-style-type: none;">
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
        <!-- Navbar content -->
        <li class="col-10"><a href="/">Главная</a></li>
    <% if (username) { %>
            <li class="col-1"><a href="/account"><%= username %>
            <% if (end_date) { %>
            </a><p id="end_date"><%= end_date %></p></li>
                <% }  else { %>
            </a><p id="end_date">Нет подписки</p></li>
            <% } %>
    <% } %>
        <% if (username) { %>
            <form id="logout" method=POST action=/logout>
                <li class="col-1"><a href="" onclick="$('#logout').submit();return false;">Выйти</a></li>
            </form>
        <% } else { %>
            <li><a href="/login">Войти</a></li>
        <% } %>
    </nav>
</div>
<script>

    function isValidDate(d) {
        return d instanceof Date && !isNaN(d);
    }


    var date = new Date(document.getElementById('end_date').innerHTML);
    function calcDate(date1,date2) {
        var diff = Math.floor(date1.getTime() - date2.getTime());
        var second = 1000;

        var seconds = Math.floor(diff/second);
        var minutes = Math.floor(seconds/60);
        var hours = Math.floor(minutes/60);

        var message = '';
        message += hours + ":"
        message += minutes%60 + ":"
        message += seconds%(60)
        return message
    }
    console.log();
    if(date!==undefined && isValidDate(date)){
        function clock(end_date){
            let date = calcDate(end_date,new Date());
            document.getElementById('end_date').innerHTML = date;

        }
        clock(date)
        setInterval(()=>{clock(date)}, 1000);
    }



</script>

<script>
    $(document).ready(function(){
        $('#login-trigger').click(function(){
            $(this).next('#login-content').slideToggle();
            $(this).toggleClass('active');

            if ($(this).hasClass('active')) $(this).find('span').html('&#x25B2;')
            else $(this).find('span').html('&#x25BC;')
        })
    });
</script>